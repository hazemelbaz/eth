# Footprinting and Social Engineering

Objectives
---
- Use Web tools for footprinting
- Conduct competitive intelligence
- Describe DNS zone transfers
- Identify the types of social engineering


Reconnaissance
---
- [Case the joint](https://en.wikipedia.org/wiki/The_Heist_of_the_Century_(film))
  - Look over the location
  - Find weakness in security systems
  - Types of locks, alarms
- In cybersecurity, this is called reconnaissance or footprinting
  - Discover information about 
    - The organization
    - Its network
  - mainly conducted passively, or nonintrusively


Tools for footprinting
---
* Open Source Intelligence (OSINT) tools
  * [Top 25 OSINT Tools for Penetration Testing](https://securitytrails.com/blog/osint-tools)
* [OSINT Framework](https://osintframework.com/)



Conducting Competitive Intelligence
---
- Numerous resources to find information legally
  - Competitive Intelligence
  - Gathering information using technology
- Web pages are an easy source of information
  - Can be explored with
    - Web proxies like [ZAP - Zed Attack Proxy](https://www.zaproxy.org/), BurpSuite
    - Browser plugins like HTTP Header live
    - Browser developer tools
- Identify methods others can use to find information about your organization
  - Limit amount of information company makes public


Analyzing a Company’s Website with ZAP
---
* ZAP scan on a website needs permission
  * Scanning a website for vulnerabilities is an attack
  * Use Kali VM as the target for practice
* ZAP can be installed on [Linux, Windows and MacOS](zaproxy.org/download/)
  * Java 11 or higher is required
* Configure ZAP as the HTTP proxy for a browser to harvest information from a website
  * can be automatically configured with Automatic Attack in ZAP


More Proxy Functions of ZAP
---
- Intercept & Modify Requests
  - can exploit poorly-made shopping sites
- Spidering
  - finds all the pages in a site by following links
  - saves a local copy of them
  - is not an attack
- Scanning for vulnerabilities is an attack
  - sends requests designed to identify vulnerabilities.
  - Get authorization first


Practice
---
- In Kali VM, run inetsim to host a fake website
  ```bash
  sudo inetsim --bind-address Kali_IP # find your Kali ip with "ifconfig -a"
  ```
- Inside the Windows VM
  - Download and install a Java JDK FX
    - [Azul Java 11, Windows, x86 64-bit JDK FX](https://www.azul.com/downloads/?version=java-11-lts&os=windows&architecture=x86-64-bit&package=jdk-fx) is recommended. Download and install the .msi file
  - Download and install [ZAP - Zed Attack Proxy](https://www.zaproxy.org/)
- use ZAP to glean information of the website faked by inetsim on Kali VM
  - Click "Automated scan", in the "url to attack" field, type "http://Kali_ip"

More Footprinting Tools
---
- Commands: host, dig, nslookup, whois
  - gathers ip address and domain information
  - [whois online](https://whois.domaintools.com/)
  - [ARIN online whois-RWS](https://whois.arin.net/ui/) can be [accessed from command line](https://www.arin.net/resources/registry/whois/rws/faq/)
    - [Examples](https://www.arin.net/resources/registry/whois/rws/cli/)
- [Free network tools from centralops ](https://centralops.net/)
  - Domain Dossier, Email Dossier, etc.
- [Sam Spade: A Multifunction Information Toolkit](https://www.garykessler.net/library/is_tools_sam_spade.html)
  - [download](https://home.ubalt.edu/abento/753/footscan/footscantools.html)
  - A GUI tool on Windows, easy to use


Practice
---
- In Windows server VM, download and play with [Sam Spade](https://www.majorgeeks.com/files/details/sam_spade.html)
  - Choose Kali VM as the target
- Refer to [Sam Spade: A Multifunction Information Toolkit](https://www.garykessler.net/library/is_tools_sam_spade.html)


Exploiting HTTP
---
- HTTP operates on port 80, HTTPS on 443
- Both use [HTTP commands/methods](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol) to interact with web servers
- [Return codes](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes) reveal information about server OS


Practice
---
Inside Kali VM, open a terminal windows,

```bash
# 1. use GET method to retrieve data by URI(Uniform Resource Identifier)
nc target_domain 80 # connect to web server
GET / HTTP/1.0 # send GET command to the server

# 2. use OPTIONS method to request available options
nc target_domain 80  # connect to web server
OPTIONS / HTTP/1.0 # send OPTIONS command to the server
```


Gathering information from browser cookies
---
- Cookie
  - Text file generated by a Web server
  - Stored on a user’s browser
  - Information sent back to Web server when user returns
  - Used to customize Web pages
  - Some cookies store personal information
  - Security issue


Practice  ✏️ 
---
- [Check cookies manually](https://www.cookieyes.com/blog/how-to-check-cookies-on-your-website-manually/)
- [View, edit, and delete cookies](https://developer.chrome.com/docs/devtools/storage/cookies/)


Gathering information from web bugs
---
- One type of [web beacons](https://en.wikipedia.org/wiki/Web_beacon)
- Masqueraded as a 1-pixel x 1-pixel image file (usually transparent)
- Referenced in an \<IMG\> tag
- Usually works with a cookie
- Purpose similar to that of spyware and adware
- Comes from third-party companies specializing in data collection
- Reveal web bugs with [Ghostery](https://www.ghostery.com/)
  - A browser extension


Using Domain Name Service (DNS) Zone Transfers
---
- DNS
  - Resolves host names to IP addresses
  - People prefer using URLs to IP addresses
- Zone transfer
  - is a configuration problem, can be fixed by [blocking zone transfers](https://learn.microsoft.com/en-us/services-hub/health/remediation-steps-ad/configure-all-dns-zones-only-to-allow-zone-transfers-to-specified-ip-addresses)
  - transfers all the records for which the DNS server is responsible
  - lets you see all host computers on the target network
  - gives you the target network diagram
- Zone Transfer tools
  - dig, host



Practice in Kali
---

```bash
# 1. Determining Primary DNS Server
# - Look for the Start of Authority (SOA) record
# - Shows zones or IP addresses
# dig ns domain_name
dig ns zonetransfer.me 

# 2. perform a zone transfer
# dig axfr @name_server domain_name
dig axfr @nsztm1.digi.ninja zonetransfer.me 

# 3. Analyze what you get
# save the zone transfer information in a file
dig axfr @nsztm1.digi.ninja zonetransfer.me > zoneinfo.txt
```


Using E-mail Addresses
---
- E-mail addresses reveal information of user accounts
  - Guess other employees’ e-mail accounts by its format
- Find corporate employee information with
  - Groups.google.com


Introduction to [Social Engineering](https://www.mitnicksecurity.com/ghost-in-the-wires)
---
- Older than computers
  - Targets the personnel of a network
  - The biggest security threat to networks
  - Most difficult to protect against
- Goals
  - Obtain confidential information (passwords)
  - Obtain personal information
- Tactics
  - Persuasion, intimidation, coercion, extortion/blackmailing
  - Study human behavior
    - Recognize personality traits
    - Understand how to read body language
- Main idea:
  - “Why to crack a password when you can simply ask for it?”
  - Users divulge their passwords to IT personnel
- Techniques
  - Urgency, quid pro quo, status quo, kindness, position


Preventing Social Engineering
---
- Train user not to reveal any information to outsiders
- Verify caller identity
  - Ask questions
  - Call back to confirm
- Security drills


The Art of Shoulder Surfing
---
- Shoulder surfer
  - Reads what users enter on keyboards:
    - Logon names, passwords, PINs
- Tools for Shoulder Surfing
- Binoculars or telescopes or cameras in cell phones
- Knowledge of key positions and typing techniques
- Knowledge of popular letter substitutions
  - s equals $, a equals @


Preventing Shoulder Surfing
---
- Avoid typing when someone is nearby
- Avoid typing when someone nearby is talking on cell phone
- Computer monitors should face away from door or cubicle entryway
- Immediately change password if you suspect someone is observing you


Dumpster Diving
---
- Attacker finds information in victim’s trash
  - Discarded computer manuals
    - Notes or passwords written in them
  - Telephone directories
  - Calendars with schedules
  - Financial reports
  - Interoffice memos
  - Company policy
  - Utility bills
  - Resumes of employees


Preventing Dumpster Diving
---
- Educate your users about dumpster diving
- Proper trash disposal
- Use “disk shredder” software to erase disks before discarding them
  - Software writes random bits
  - Done at least seven times
- Discard computer manuals offsite
- Shred documents before disposal


Piggybacking
---
- Trailing closely behind an employee cleared to enter restricted areas
- How it works:
  - Watch authorized personnel enter an area
  - Quickly join them at security entrance
  - Exploit the desire of other to be polite and helpful
  - Attacker wears a fake badge or security card


Preventing Piggybacking
---
- Use turnstiles
- Train personnel to notify the presence of strangers
- Do not hold secured doors for anyone
  - Even for people you know
- All employees must use secure cards



Phishing
---
- Deceptive emails or text messages
- Can take money, passwords, or install malware on your computer


 ## References
* [Kali Linux Tools Listing by category](https://en.kali.tools/)
  * [Featured tools](https://www.kali.org/tools/)
* [Linux nc command](https://www.computerhope.com/unix/nc.htm)
* [HTTP Prompt](https://http-prompt.com/)
  * [httpie](https://httpie.io/)
    * [source](https://github.com/httpie/httpie)
* [Metaspoitable3](https://www.rapid7.com/blog/post/2016/11/15/test-your-might-with-the-shiny-new-metasploitable3/)
  * [download]9https://sourceforge.net/projects/metasploitable3-ub1404upgraded/
  * login with Username - vagrant;password - vagrant
